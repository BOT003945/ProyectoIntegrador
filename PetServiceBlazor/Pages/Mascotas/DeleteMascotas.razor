@page "/mascotas/delete/{id:int}"

<PageTitle>Borrar Libro [@mascota?.Nombre] ? </PageTitle>

<h1>Â¿Esta seguro que desea borrar el registro de la mascota "@mascota?.Nombre"? </h1>

<button class="btn btn-primary" @onclick="ConfirmDelete" >Confirmar</button>
<a class="btn btn-danger" href="/mascotas">Cancelar</a>


@using System.Net.Http
@using System.Net.Http.Json
@using PetServiceBlazor.Data.Models
@inject HttpClient http
@inject NavigationManager NavigationManager

@code {
    [Parameter]
    public int id { get; set; }

    Mascota? mascota; 

    protected override async Task OnInitializedAsync()
    {
        mascota = await http.GetFromJsonAsync<Mascota>($"api/Mascotas/{id}");
    }

    private async Task ConfirmDelete()
    {
        Console.WriteLine($"el id es {id}");
        var response = await http.DeleteAsync($"api/Mascotas/{id}");
        if(response.IsSuccessStatusCode){
            NavigationManager.NavigateTo("/mascotas");

        }
    }
}